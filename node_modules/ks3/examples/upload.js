var KS3 = require('..');
var path = require('path');
var fs = require('fs');

const { ak, sk, bucketName, region } = require('./const');

var key = 'a.mp4';
var bigFile = path.join(__dirname, '../test/assets/' + key);


var filePath = bigFile;
var fileName = (function(){
	var s = filePath.split('/');
	return s[s.length-1];
})();

var key = `test_${fileName}`;

var client = new KS3(ak, sk, bucketName, region);

// 上传
const req = client.upload.start({
	Bucket: bucketName,
	filePath: filePath,
	Key: key,
	isOnprogress: true
},
function(err, data, res) {
	console.log('request result：', err, data)
});
req.uploadListener = function (uploadBytes, totals) {
    console.log("uploadBytes, totals: ", uploadBytes, totals);
}
req.on('end', () => {
    console.log('request end')
})